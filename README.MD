# -_calculadora_java-con_interfaz_grafica_swing_y_oracle_19c_-.  
# üßÆ Calculadora Java con Interfaz Gr√°fica (Swing) y Oracle 19c :.	

<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/08aec1fd-79c3-4268-a576-8a8027f3e51b" />   

Aplicaci√≥n de escritorio en **Java (Swing)** que permite realizar operaciones aritm√©ticas, mostrando los resultados en pantalla 
y **registrando cada c√°lculo en una base de datos Oracle 19c**. Incluye c√≥digo completo, instrucciones paso a paso, y scripts SQL .

---

## üìã Resumen R√°pido

1. Crea la tabla `calculos` en Oracle 19c (ver SQL m√°s abajo) .  
2. A√±ade el **driver Oracle JDBC (ojdbc)** al proyecto .  
3. Copia las tres clases Java :  
   - `DatabaseManager.java`  
   - `ResultDAO.java`  
   - `CalculatorGUI.java` (interfaz gr√°fica)  
4. Ejecuta la aplicaci√≥n: cada c√°lculo se guardar√° autom√°ticamente en la base de datos .

---

## üß± 1. SQL ‚Äî Crear Tabla en Oracle 19c :

Ejecuta este script en **SQL*Plus** o **SQL Developer** :

```sql
CREATE TABLE calculos (
    id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    expresion VARCHAR2(4000),
    resultado VARCHAR2(4000),
    fecha TIMESTAMP DEFAULT SYSTIMESTAMP
);

-- (opcional) Si usas otro esquema :
-- GRANT INSERT, SELECT ON your_schema.calculos TO otro_usuario;

‚öôÔ∏è 2. A√±adir el Driver de Oracle (ojdbc) :
A) M√©todo recomendado (IntelliJ + JAR manual)
Descarga ojdbc8.jar u ojdbc11.jar desde la web oficial de Oracle .

En IntelliJ IDEA :

Ve a File ‚Üí Project Structure ‚Üí Libraries ‚Üí + ‚Üí Java

A√±ade el archivo .jar descargado .

B) Si usas Maven
Si tienes acceso al repositorio Oracle, puedes usar una dependencia en tu pom.xml .
De lo contrario, usa el m√©todo manual para evitar conflictos .

üíª 3. C√≥digo Java ‚Äî Clases del Proyecto :
Estructura de paquetes sugerida:
src/main/java/com/miempresa/calculadora/

üß© DatabaseManager.java

package com.miempresa.calculadora;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DatabaseManager {
    private static final String URL = "jdbc:oracle:thin:@//localhost:1521/orcl";
    private static final String USER = "tu_usuario";
    private static final String PASSWORD = "tu_contrase√±a";

    static {
        try {
            Class.forName("oracle.jdbc.OracleDriver");
        } catch (ClassNotFoundException e) {
            System.err.println("No se encontr√≥ el driver Oracle JDBC. A√±ade ojdbc.jar al classpath.");
            e.printStackTrace();
        }
    }

    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(URL, USER, PASSWORD);
    }
}


üíæ ResultDAO.java

package com.miempresa.calculadora;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class ResultDAO {

    private static final String INSERT_SQL = "INSERT INTO calculos (expresion, resultado) VALUES (?, ?)";

    public void save(String expresion, String resultado) throws SQLException {
        try (Connection conn = DatabaseManager.getConnection();
             PreparedStatement ps = conn.prepareStatement(INSERT_SQL)) {
            ps.setString(1, expresion);
            ps.setString(2, resultado);
            ps.executeUpdate();
        }
    }
}

üßÆ CalculatorGUI.java (Interfaz Gr√°fica + L√≥gica)

package com.miempresa.calculadora;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;

public class CalculatorGUI extends JFrame {

    private final JTextField display;
    private StringBuilder currentExpression;
    private final ResultDAO dao;

    public CalculatorGUI() {
        super("Calculadora - Guarda en Oracle 19c");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(360, 480);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout(6,6));

        dao = new ResultDAO();
        currentExpression = new StringBuilder();

        // Display
        display = new JTextField();
        display.setEditable(false);
        display.setFont(new Font("SansSerif", Font.BOLD, 24));
        display.setHorizontalAlignment(SwingConstants.RIGHT);
        add(display, BorderLayout.NORTH);

        // Panel de botones
        JPanel panel = new JPanel(new GridLayout(5, 4, 6, 6));
        String[] botones = {
            "7","8","9","/",
            "4","5","6","*",
            "1","2","3","-",
            "0",".","=","+",
            "C","‚Üê","Guardar","Historial"
        };
        for (String b : botones) {
            JButton btn = new JButton(b);
            btn.setFont(new Font("SansSerif", Font.PLAIN, 18));
            btn.addActionListener(new ButtonListener());
            panel.add(btn);
        }
        add(panel, BorderLayout.CENTER);

        setVisible(true);
    }

    private class ButtonListener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            String cmd = e.getActionCommand();
            switch (cmd) {
                case "C": currentExpression.setLength(0); display.setText(""); break;
                case "‚Üê":
                    if (currentExpression.length() > 0) {
                        currentExpression.setLength(currentExpression.length() - 1);
                        display.setText(currentExpression.toString());
                    }
                    break;
                case "=": evaluateAndShow(); break;
                case "Guardar": saveCurrent(); break;
                case "Historial": showHistory(); break;
                default:
                    currentExpression.append(cmd);
                    display.setText(currentExpression.toString());
            }
        }

        private void evaluateAndShow() {
            String expr = currentExpression.toString().trim();
            if (expr.isEmpty()) return;
            try {
                double value = ExpressionEvaluator.evaluate(expr);
                String resultado = formatResult(value);
                display.setText(resultado);
                currentExpression.setLength(0);
                currentExpression.append(resultado);
            } catch (IllegalArgumentException ex) {
                JOptionPane.showMessageDialog(CalculatorGUI.this, "Expresi√≥n inv√°lida: " + ex.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
            }
        }

        private void saveCurrent() {
            String expr = display.getText().trim();
            if (expr.isEmpty()) expr = currentExpression.toString().trim();
            if (expr.isEmpty()) {
                JOptionPane.showMessageDialog(CalculatorGUI.this, "No hay nada para guardar.", "Info", JOptionPane.INFORMATION_MESSAGE);
                return;
            }
            String expresion = currentExpression.toString();
            String resultado = expr;
            try {
                dao.save(expresion, resultado);
                JOptionPane.showMessageDialog(CalculatorGUI.this, "Registro guardado en la base de datos.", "OK", JOptionPane.INFORMATION_MESSAGE);
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(CalculatorGUI.this, "Error al guardar en la BD: " + ex.getMessage(), "Error BD", JOptionPane.ERROR_MESSAGE);
            }
        }

        private void showHistory() {
            StringBuilder sb = new StringBuilder();
            try (var conn = DatabaseManager.getConnection();
                 var st = conn.createStatement();
                 var rs = st.executeQuery("SELECT id, expresion, resultado, fecha FROM calculos ORDER BY fecha DESC FETCH FIRST 50 ROWS ONLY")) {
                while (rs.next()) {
                    sb.append(rs.getLong("id"))
                      .append(": ")
                      .append(rs.getString("expresion"))
                      .append(" = ")
                      .append(rs.getString("resultado"))
                      .append(" (")
                      .append(rs.getTimestamp("fecha"))
                      .append(")\n");
                }
                JTextArea area = new JTextArea(sb.length() == 0 ? "No hay registros." : sb.toString());
                area.setEditable(false);
                JScrollPane sp = new JScrollPane(area);
                sp.setPreferredSize(new Dimension(600, 400));
                JOptionPane.showMessageDialog(CalculatorGUI.this, sp, "Historial (√∫ltimos 50)", JOptionPane.PLAIN_MESSAGE);
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(CalculatorGUI.this, "Error al leer historial: " + ex.getMessage(), "Error BD", JOptionPane.ERROR_MESSAGE);
            }
        }

        private String formatResult(double value) {
            return (Math.abs(value - Math.round(value)) < 1e-12)
                    ? String.valueOf((long) Math.round(value))
                    : String.valueOf(value);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(CalculatorGUI::new);
    }
}

üß† ExpressionEvaluator.java

package com.miempresa.calculadora;

import java.util.Stack;

public class ExpressionEvaluator {

    public static double evaluate(String expr) {
        if (expr == null || expr.trim().isEmpty()) throw new IllegalArgumentException("Expresi√≥n vac√≠a");
        return evaluateExpression(expr);
    }

    private static double evaluateExpression(String s) {
        s = s.replaceAll("\\s+", "");
        Stack<Double> values = new Stack<>();
        Stack<Character> ops = new Stack<>();

        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            if (Character.isDigit(c) || c == '.') {
                StringBuilder sb = new StringBuilder();
                while (i < s.length() && (Character.isDigit(s.charAt(i)) || s.charAt(i) == '.')) {
                    sb.append(s.charAt(i++));
                }
                i--;
                values.push(Double.parseDouble(sb.toString()));
            } else if (c == '(') ops.push(c);
            else if (c == ')') {
                while (!ops.isEmpty() && ops.peek() != '(') applyOp(values, ops.pop());
                ops.pop();
            } else if (isOperator(c)) {
                if ((i == 0 || s.charAt(i-1) == '(' || isOperator(s.charAt(i-1))) && (c == '+' || c == '-')) values.push(0.0);
                while (!ops.isEmpty() && precedence(ops.peek()) >= precedence(c)) applyOp(values, ops.pop());
                ops.push(c);
            } else throw new IllegalArgumentException("Caracter inv√°lido: " + c);
        }

        while (!ops.isEmpty()) applyOp(values, ops.pop());
        return values.pop();
    }

    private static boolean isOperator(char c) { return c == '+' || c == '-' || c == '*' || c == '/'; }

    private static int precedence(char op) { return (op == '+' || op == '-') ? 1 : 2; }

    private static void applyOp(Stack<Double> values, char op) {
        double b = values.pop(), a = values.pop();
        switch (op) {
            case '+': values.push(a + b); break;
            case '-': values.push(a - b); break;
            case '*': values.push(a * b); break;
            case '/': if (Math.abs(b) < 1e-15) throw new IllegalArgumentException("Divisi√≥n por cero");
                      values.push(a / b); break;
        }
    }
}

üîí 4. Seguridad y Transacciones
El uso de PreparedStatement previene inyecciones SQL .

Para operaciones m√°s complejas, puedes implementar control de transacciones (commit/rollback) .

‚ñ∂Ô∏è 5. Ejecuci√≥n
Aseg√∫rate de que la tabla calculos exista .

Ajusta URL, USER, y PASSWORD en DatabaseManager.java .

A√±ade el driver ojdbc.jar al classpath .

Ejecuta CalculatorGUI.main() .

Realiza operaciones y usa el bot√≥n Guardar o Historial .

üí° 6. Mejoras Opcionales
Reemplazar el evaluador interno con una librer√≠a (por ejemplo, exp4j o mXparser) .

Agregar autenticaci√≥n o configuraci√≥n externa de la BD .

Guardar tipos de operaciones (suma, resta, etc.) en una columna adicional .

Redise√±ar la UI usando JavaFX para una interfaz moderna.

üìò Autor: Proyecto de ejemplo educativo
üóÑÔ∏è Base de Datos: Oracle 19c
üíª Tecnolog√≠a: Java Swing + JDBC :. . : .
